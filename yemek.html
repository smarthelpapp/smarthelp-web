<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yemek AsistanÄ±</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<header class="header">
    <h1>ğŸ½ï¸ Yemek AsistanÄ±</h1>
    <p>Malzemeye veya yemek adÄ±na gÃ¶re tarif bul</p>
</header>

<div class="search-container">
    <input type="text" id="searchInput" placeholder="Ã¶rn: tavuk, makarna, mercimek...">
    <button id="searchBtn" onclick="searchRecipes()">Ara ğŸ”</button>
</div>

<div id="resultList" class="results"></div>

<button id="showMoreBtn" onclick="showMore()" class="show-more">Daha Fazla GÃ¶ster</button>

<script>
const API_URL = "https://smarthelp-api.onrender.com/recipes";
let allResults = [];
let displayedCount = 0;

// ğŸ” â€” ARAMA FONKSÄ°YONU
async function searchRecipes() {
    const query = document.getElementById("searchInput").value.toLowerCase();

    const res = await fetch(API_URL);
    const data = await res.json();

    allResults = data.filter(item =>
        item.title.toLowerCase().includes(query) ||
        item.ingredients.some(i => i.toLowerCase().includes(query))
    );

    displayedCount = 0;
    document.getElementById("resultList").innerHTML = "";

    showMore(); // ilk 20 gÃ¶ster
    document.getElementById("showMoreBtn").style.display = "block";
}

// ğŸ“Œ â€” DAHA FAZLA GÃ–STER
function showMore() {
    const next = allResults.slice(displayedCount, displayedCount + 20);
    displayedCount += 20;

    renderResults(next);
}

// ğŸ“Œ â€” SONUÃ‡LARI EKRANA YAZDIRMA
function renderResults(list) {
    const container = document.getElementById("resultList");

    list.forEach(r => {
        const card = document.createElement("div");
        card.className = "recipe-card";

        card.innerHTML = `
            <h2>${r.title}</h2>
            <p><b>Kalori:</b> ${r.kcal}</p>
            <p><b>Malzemeler:</b> ${r.ingredients.join(", ")}</p>

            <button class="detailBtn">Tarifi GÃ¶ster</button>

            <div class="details" style="display:none;">
                <h3>HazÄ±rlanÄ±ÅŸÄ±</h3>
                <ol>${r.steps.map(s => `<li>${s}</li>`).join("")}</ol>
            </div>
        `;

        card.querySelector(".detailBtn").addEventListener("click", () => {
            const det = card.querySelector(".details");
            det.style.display = det.style.display === "none" ? "block" : "none";
        });

        container.appendChild(card);
    });
}
</script>

</body>
</html>
